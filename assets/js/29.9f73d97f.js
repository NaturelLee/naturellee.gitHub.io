(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{256:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"谁不想拥有一个自己的网站-博客呢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#谁不想拥有一个自己的网站-博客呢"}},[t._v("#")]),t._v(" 谁不想拥有一个自己的网站/博客呢？")]),t._v(" "),s("p",[t._v("是呀，谁不想拥有一个自己的网站/博客呢？")]),t._v(" "),s("p",[t._v('我们很多人可能曾经通过多种多样的方式搭建过自己的博客系统。有的是一时兴起，有时是经过深思熟虑，有的不愿成为他人嫁衣，有的是想保留下这两分自留地。即使搭建完成之后，它们大概率会像刚出生一样静静地躺在那里，但我们仍然会选择"Just do it!"。')]),t._v(" "),s("h2",{attrs:{id:"搭建博客的痛点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建博客的痛点"}},[t._v("#")]),t._v(" 搭建博客的痛点")]),t._v(" "),s("ol",[s("li",[t._v("源码存放在本地，容易丢失；发布的博客系统只是打包好的文件。")]),t._v(" "),s("li",[t._v("不能一键发布。")]),t._v(" "),s("li",[t._v("源码存放 github，可能会透露一些敏感或隐私信息。")]),t._v(" "),s("li",[t._v("发布的博客网址携带项目目录名，如： naturellee.github.io/contacts/xxx.html，而我们期望的是 contacts 不存在。")])]),t._v(" "),s("p",[t._v("因此对搭建博客系统提出以下要求：")]),t._v(" "),s("ol",[s("li",[t._v("源码私有存放；")]),t._v(" "),s("li",[t._v("发布到自己的 username.github.io 主路径；")]),t._v(" "),s("li",[t._v("源码更新即可触发博客的更新发布；")])]),t._v(" "),s("h2",{attrs:{id:"正确姿势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#正确姿势"}},[t._v("#")]),t._v(" 正确姿势")]),t._v(" "),s("p",[t._v("为满足以上要求，现提出一种新的构建方式：")]),t._v(" "),s("ol",[s("li",[t._v("在个人 github 中新建 private repo: notes，用于存放整个博客系统的代码；")]),t._v(" "),s("li",[t._v("在个人 github 中新建 public repo: username.github.io；这是一个特殊的 repo，提交到 master 分支的代码会自动作为 username.github.io 的内容；因此我们会把 notes 分支打包好的代码自动推送到这个项目中；")]),t._v(" "),s("li",[t._v("使用 github actions 在 notes repo 中添加 CI 构建脚本，监听 push 请求，触发编译，并自动提交打包好的代码到 username.github.io repo 中；")]),t._v(" "),s("li",[t._v("由于 github actions 中会使用项目权限，需要添加相应的 access token;")])]),t._v(" "),s("h2",{attrs:{id:"实战案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实战案例"}},[t._v("#")]),t._v(" 实战案例")]),t._v(" "),s("p",[t._v(".github/workflows/ci.yml文件")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Build and Deploy\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-and-deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout 🛎️\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2.3.1 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# If you're using actions/checkout@v2 you must set persist-credentials to false in most cases for the deployment to work correctly.")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("persist-credentials")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install and Build 🔧 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This example project is built using npm and outputs the result to the 'build' folder. Replace with the commands required to build your project, or remove this step entirely if your site is pre-built.")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n          npm install\n          npm run build #具体命令对应你的项目打包命令")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy 🚀\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" JamesIves/github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@4.1.0\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.ACCESS_TOKEN "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ACCESS_TOKEN需要在notes/settings/Secrets 下面添加Actions secrets")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("repository-name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NaturelLee/naturellee.github.io\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The branch that the action should deploy to.")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("folder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docs/.vuepress/dist "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The folder that the action should deploy.")]),t._v("\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);