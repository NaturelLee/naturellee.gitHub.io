<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>操作系统相关 | NaturelLee Blogs</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="Cease to upgrade, you cease to live!">
    
    <link rel="preload" href="/assets/css/0.styles.e422860a.css" as="style"><link rel="preload" href="/assets/js/app.bd3467d9.js" as="script"><link rel="preload" href="/assets/js/2.62d91e13.js" as="script"><link rel="preload" href="/assets/js/7.0b8bdde4.js" as="script"><link rel="prefetch" href="/assets/js/10.439227e3.js"><link rel="prefetch" href="/assets/js/11.7cbbc9ad.js"><link rel="prefetch" href="/assets/js/12.184ffd58.js"><link rel="prefetch" href="/assets/js/13.149ff76c.js"><link rel="prefetch" href="/assets/js/14.1b6e964d.js"><link rel="prefetch" href="/assets/js/15.4b3916da.js"><link rel="prefetch" href="/assets/js/16.5dd0b4cc.js"><link rel="prefetch" href="/assets/js/17.ca2d0fb5.js"><link rel="prefetch" href="/assets/js/18.74cd6d44.js"><link rel="prefetch" href="/assets/js/19.cd243328.js"><link rel="prefetch" href="/assets/js/20.9efdb7b4.js"><link rel="prefetch" href="/assets/js/21.0cc9c81c.js"><link rel="prefetch" href="/assets/js/22.50d137c2.js"><link rel="prefetch" href="/assets/js/23.2ba72e90.js"><link rel="prefetch" href="/assets/js/24.c638e324.js"><link rel="prefetch" href="/assets/js/25.d52be13f.js"><link rel="prefetch" href="/assets/js/26.635e0b30.js"><link rel="prefetch" href="/assets/js/27.f5296968.js"><link rel="prefetch" href="/assets/js/28.cb2ded15.js"><link rel="prefetch" href="/assets/js/29.ababf478.js"><link rel="prefetch" href="/assets/js/3.027ab360.js"><link rel="prefetch" href="/assets/js/4.d8c7114c.js"><link rel="prefetch" href="/assets/js/5.8cc31ec1.js"><link rel="prefetch" href="/assets/js/6.6dc7d4fb.js"><link rel="prefetch" href="/assets/js/8.b2d2775f.js"><link rel="prefetch" href="/assets/js/9.5b770a29.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e422860a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.png" alt="NaturelLee Blogs" class="logo"> <span class="site-name can-hide">NaturelLee Blogs</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FE" class="dropdown-title"><span class="title">FE</span> <span class="arrow down"></span></button> <button type="button" aria-label="FE" class="mobile-dropdown-title"><span class="title">FE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/fe/hooks.html" class="nav-link">
  hooks
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/reactRefs.html" class="nav-link">
  ReactRefs
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/feInterview.html" class="nav-link">
  前端面试题
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/webFrontEndTutorial.html" class="nav-link">
  前端教程
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/reactImp.html" class="nav-link">
  React性能优化
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/EverythingYouNeedtoKnowAboutDateinJavaScript.html" class="nav-link">
  JS中的日期
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/postcss.html" class="nav-link">
  Postcss实践
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/puppeteer.html" class="nav-link">
  Puppeteer集成测试
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/sass.html" class="nav-link">
  sass
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Server" class="dropdown-title"><span class="title">Server</span> <span class="arrow down"></span></button> <button type="button" aria-label="Server" class="mobile-dropdown-title"><span class="title">Server</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/server/Restful.html" class="nav-link">
  Restful
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="OS" class="dropdown-title"><span class="title">OS</span> <span class="arrow down"></span></button> <button type="button" aria-label="OS" class="mobile-dropdown-title"><span class="title">OS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/os/os.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  OS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Rust" class="dropdown-title"><span class="title">Rust</span> <span class="arrow down"></span></button> <button type="button" aria-label="Rust" class="mobile-dropdown-title"><span class="title">Rust</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/rust/RustBook.html" class="nav-link">
  The Book
</a></li><li class="dropdown-item"><!----> <a href="/v1/rust/RustStd.html" class="nav-link">
  Std
</a></li><li class="dropdown-item"><!----> <a href="/v1/rust/RustFirstClass.html" class="nav-link">
  Rust First Class
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Read" class="dropdown-title"><span class="title">Read</span> <span class="arrow down"></span></button> <button type="button" aria-label="Read" class="mobile-dropdown-title"><span class="title">Read</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/read/principles.html" class="nav-link">
  原则
</a></li><li class="dropdown-item"><!----> <a href="/v1/read/takeTimeAsFriends.html" class="nav-link">
  把时间当做朋友
</a></li><li class="dropdown-item"><!----> <a href="/v1/read/6monthEnglish.html" class="nav-link">
  半年掌握一门外语
</a></li><li class="dropdown-item"><!----> <a href="/v1/read/10StepstoBecomeaMillionairein5Years.html" class="nav-link">
  如何成为百万富翁
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Sparkling" class="dropdown-title"><span class="title">Sparkling</span> <span class="arrow down"></span></button> <button type="button" aria-label="Sparkling" class="mobile-dropdown-title"><span class="title">Sparkling</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/theRightWayToBuildYourBlog.html" class="nav-link">
  这才是搭建个人博客的正确姿
</a></li><li class="dropdown-item"><!----> <a href="/v1/hackYourMemory.html" class="nav-link">
  记忆宫殿
</a></li><li class="dropdown-item"><!----> <a href="/v1/editorSkills.html" class="nav-link">
  编辑器小技巧
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/NaturelLee/blogs/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FE" class="dropdown-title"><span class="title">FE</span> <span class="arrow down"></span></button> <button type="button" aria-label="FE" class="mobile-dropdown-title"><span class="title">FE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/fe/hooks.html" class="nav-link">
  hooks
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/reactRefs.html" class="nav-link">
  ReactRefs
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/feInterview.html" class="nav-link">
  前端面试题
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/webFrontEndTutorial.html" class="nav-link">
  前端教程
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/reactImp.html" class="nav-link">
  React性能优化
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/EverythingYouNeedtoKnowAboutDateinJavaScript.html" class="nav-link">
  JS中的日期
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/postcss.html" class="nav-link">
  Postcss实践
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/puppeteer.html" class="nav-link">
  Puppeteer集成测试
</a></li><li class="dropdown-item"><!----> <a href="/v1/fe/sass.html" class="nav-link">
  sass
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Server" class="dropdown-title"><span class="title">Server</span> <span class="arrow down"></span></button> <button type="button" aria-label="Server" class="mobile-dropdown-title"><span class="title">Server</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/server/Restful.html" class="nav-link">
  Restful
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="OS" class="dropdown-title"><span class="title">OS</span> <span class="arrow down"></span></button> <button type="button" aria-label="OS" class="mobile-dropdown-title"><span class="title">OS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/os/os.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  OS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Rust" class="dropdown-title"><span class="title">Rust</span> <span class="arrow down"></span></button> <button type="button" aria-label="Rust" class="mobile-dropdown-title"><span class="title">Rust</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/rust/RustBook.html" class="nav-link">
  The Book
</a></li><li class="dropdown-item"><!----> <a href="/v1/rust/RustStd.html" class="nav-link">
  Std
</a></li><li class="dropdown-item"><!----> <a href="/v1/rust/RustFirstClass.html" class="nav-link">
  Rust First Class
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Read" class="dropdown-title"><span class="title">Read</span> <span class="arrow down"></span></button> <button type="button" aria-label="Read" class="mobile-dropdown-title"><span class="title">Read</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/read/principles.html" class="nav-link">
  原则
</a></li><li class="dropdown-item"><!----> <a href="/v1/read/takeTimeAsFriends.html" class="nav-link">
  把时间当做朋友
</a></li><li class="dropdown-item"><!----> <a href="/v1/read/6monthEnglish.html" class="nav-link">
  半年掌握一门外语
</a></li><li class="dropdown-item"><!----> <a href="/v1/read/10StepstoBecomeaMillionairein5Years.html" class="nav-link">
  如何成为百万富翁
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Sparkling" class="dropdown-title"><span class="title">Sparkling</span> <span class="arrow down"></span></button> <button type="button" aria-label="Sparkling" class="mobile-dropdown-title"><span class="title">Sparkling</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/v1/theRightWayToBuildYourBlog.html" class="nav-link">
  这才是搭建个人博客的正确姿
</a></li><li class="dropdown-item"><!----> <a href="/v1/hackYourMemory.html" class="nav-link">
  记忆宫殿
</a></li><li class="dropdown-item"><!----> <a href="/v1/editorSkills.html" class="nav-link">
  编辑器小技巧
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/NaturelLee/blogs/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>操作系统相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/v1/os/os.html#虚拟地址空间" class="sidebar-link">虚拟地址空间</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v1/os/os.html#进程、线程" class="sidebar-link">进程、线程</a></li><li class="sidebar-sub-header"><a href="/v1/os/os.html#进程" class="sidebar-link">进程</a></li><li class="sidebar-sub-header"><a href="/v1/os/os.html#线程" class="sidebar-link">线程</a></li></ul></li><li><a href="/v1/os/os.html#memory-segment-内存段" class="sidebar-link">Memory segment: 内存段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v1/os/os.html#text-segment-代码段" class="sidebar-link">text segment: 代码段</a></li><li class="sidebar-sub-header"><a href="/v1/os/os.html#data-segment-数据段" class="sidebar-link">data segment: 数据段</a></li><li class="sidebar-sub-header"><a href="/v1/os/os.html#bss-segment" class="sidebar-link">bss: segment</a></li><li class="sidebar-sub-header"><a href="/v1/os/os.html#heap" class="sidebar-link">heap</a></li><li class="sidebar-sub-header"><a href="/v1/os/os.html#stack" class="sidebar-link">stack</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="操作系统相关"><a href="#操作系统相关" class="header-anchor">#</a> 操作系统相关</h1> <h2 id="虚拟地址空间"><a href="#虚拟地址空间" class="header-anchor">#</a> 虚拟地址空间</h2> <p>在 32 位机器下，虚拟地址空间大小为 4G。这些虚拟地址通过页表 (Page Table) 映射到物理内存，页表由操作系统维护，并被处理器的内存管理单元 (MMU) 硬件引用。<strong>每个进程都拥有一套属于它自己的页表，因此对于每个进程而言都好像独享了整个虚拟地址空间。</strong></p> <p>Linux 将这 4G 的空间分为两个部分：</p> <p><img src="/assets/img/spaces.417e14b3.png" alt=""></p> <ol><li>Kernel space 内核空间。</li> <li>User Mode Space 用户空间。</li></ol> <p><strong>每个进程的 4G 地址空间中，最高 1G 都是一样的，即内核空间。只有剩余的 3G 才归进程自己使用。</strong></p> <p><strong>换句话说就是， 最高 1G 的内核空间是被所有进程共享的！</strong></p> <p>而上面进程虚拟地址空间中的栈区，正指的是我们所说的<strong>进程栈</strong>。进程栈的实时大小并不固定，它也有最大限制 RLIMIT_STACK (一般为 8M)。</p> <p>一个进程至少有一个线程，主线程有自己的栈，64 位 Linux rust 程序主线程栈是 8M。其他程序线程默认是 2M。</p> <h3 id="进程、线程"><a href="#进程、线程" class="header-anchor">#</a> 进程、线程</h3> <ol><li>从 Linux 内核的角度来说，其实它并没有线程的概念。线程仅仅被视为一个与<strong>其他进程共享某些资源</strong>的进程，而是否共享地址空间几乎是进程和 Linux 中所谓线程的唯一区别。</li> <li>线程的内存描述符 将直接指向 父进程的内存描述符。</li> <li>线程一旦创建就无法在修改其栈大小了，一旦用尽就没了，由于<strong>线程栈</strong>是从进程的地址空间中 map 出来的一块内存区域，<strong>原则上是线程私有的</strong>。</li> <li>由于进程间是隔离的,各自拥有自己的内存资源。</li></ol> <h3 id="进程"><a href="#进程" class="header-anchor">#</a> 进程</h3> <ol><li>进程是系统分配资源的最小单位</li> <li>线程是 CPU 调度的最小单位</li> <li>由于默认进程内只有一个线程,所以多核 CPU 处理多进程就像是一个进程一个核心</li></ol> <h3 id="线程"><a href="#线程" class="header-anchor">#</a> 线程</h3> <ol><li>线程属于进程</li> <li>线程共享进程的内存地址空间</li> <li>线程几乎不占有系统资源</li></ol> <h2 id="memory-segment-内存段"><a href="#memory-segment-内存段" class="header-anchor">#</a> Memory segment: 内存段</h2> <p><img src="/assets/img/segments.a8b51772.png" alt="" title="segments"></p> <h3 id="text-segment-代码段"><a href="#text-segment-代码段" class="header-anchor">#</a> text segment: 代码段</h3> <p>用于<strong>存放程序代码</strong>的区域，编译时确定，只读。更进一步讲是存放处理器的机器指令</p> <h3 id="data-segment-数据段"><a href="#data-segment-数据段" class="header-anchor">#</a> data segment: 数据段</h3> <p>用于存放在编译阶段(而非运行时)就能确定的数据，可读可写。也是通常所说的<strong>静态存储区</strong>，<strong>赋了初值的</strong>全局变量、常量和静态变量都存放在这个域。</p> <h3 id="bss-segment"><a href="#bss-segment" class="header-anchor">#</a> bss: segment</h3> <p>即: block started by symbol segment</p> <p>通常是指用来存放程序中<strong>未初始化的全局变量</strong>，初始化时 bss 部分将会清零。</p> <h3 id="heap"><a href="#heap" class="header-anchor">#</a> heap</h3> <p>存放进程运行中动态 分配的内存段，大小不固定。</p> <p>同一进程中的所有线程共享这一块内存。</p> <h3 id="stack"><a href="#stack" class="header-anchor">#</a> stack</h3></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/9/2022, 11:00:04 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/assets/js/app.bd3467d9.js" defer></script><script src="/assets/js/2.62d91e13.js" defer></script><script src="/assets/js/7.0b8bdde4.js" defer></script>
  </body>
</html>
